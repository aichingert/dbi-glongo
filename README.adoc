= glongo
:icons: font
:sectnums:
:toc: left

Mongodb example project with a gtk frontend using the mongo-c-driver

== Information

=== libbson

* You are working with documents which are bson_t
* The way to get the keys of a document is to iterate over it

[source, c]
----
bson_t doc = /*...*/;
bson_iter_t iter;

if ((bson_iter_init(&iter, &doc))) {
	while (bson_iter_next(&iter)) {
		printf("%s\n", bson_iter_key(&iter));
	}
}
----

** here you get all keys of the document for example { foo: "Hello", bar: "World" } you get "foo", "bar"

* The way to get the values out of a document is also to iterate over it but you use other functions than bson_iter_key like

[source, c]
----
const char *
bson_iter_utf8 (const bson_iter_t *iter, /* IN */
                uint32_t *length)        /* OUT */

void
bson_iter_array (const bson_iter_t *iter, /* IN */
                 uint32_t *array_len,     /* OUT */
                 const uint8_t **array)   /* OUT */
// if you want to process the array you have to convert it back to a document and then continue the same procedure as before 

// (how to convert it)
bson_t b;
uint32_t len;
const uint8_t *data;

bson_iter_array(&child, &len, &data);
if (bson_init_static(&b, data, len)) {
	// ...
}
----

== How to run

[source, sh]
----
make
----

If make fails then you have to install the gtk and mongo-c-driver libraries for c.
